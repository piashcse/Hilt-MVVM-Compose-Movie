---
description:
globs:
alwaysApply: false
---
# Development Control Rules

## NguyÃªn Táº¯c CÆ¡ Báº£n
- ***Báº®T BUá»˜C*** kiá»ƒm tra Planning_[TenDuAn].md trÆ°á»›c khi báº¯t Ä‘áº§u development
- ***Báº®T BUá»˜C*** validate planning approval trÆ°á»›c khi viáº¿t code
- ***Báº®T BUá»˜C*** tuÃ¢n thá»§ architecture Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong planning
- ***Báº®T BUá»˜C*** follow development phases theo thá»© tá»± (MVP â†’ Enhanced â†’ Advanced)
- ***NGHIÃŠM Cáº¤M*** code khi chÆ°a cÃ³ planning hoÃ n chá»‰nh vÃ  Ä‘Æ°á»£c approve

## Pre-Development Validation

### Required Files Check
```bash
# AI pháº£i kiá»ƒm tra cÃ¡c file nÃ y tá»“n táº¡i vÃ  hoÃ n chá»‰nh:
1. Brainstorm_[TenDuAn].md âœ…
2. Planning_[TenDuAn].md âœ…
3. .project-identity âœ…
4. Planning approval âœ…

# Mobile Utility Apps - Additional Requirements:
5. TDD test plan completed âœ… (use tdd-mobile-workflow.mdc)
6. Revenue strategy configured âœ… (use mobile-utility-workflow.mdc)
7. Regional ad strategy defined âœ…
8. Cross-platform compatibility confirmed âœ…
```

### Planning Completion Check
AI ***Báº®T BUá»˜C*** verify cÃ¡c sections trong Planning:
- [ ] Executive Summary completed
- [ ] Development Phases defined
- [ ] Architecture Overview specified
- [ ] Risk Management addressed
- [ ] Success Criteria defined
- [ ] Planning Approval âœ… checked

## Error Messages for Invalid Development Requests

### No Planning File
```
ğŸš« KHÃ”NG THá»‚ Báº®T Äáº¦U DEVELOPMENT

âŒ ChÆ°a tÃ¬m tháº¥y file Planning_[TenDuAn].md
âŒ Development chá»‰ Ä‘Æ°á»£c thá»±c hiá»‡n sau khi cÃ³ planning hoÃ n chá»‰nh

ğŸ”„ Quy trÃ¬nh báº¯t buá»™c:
1. Brainstorm Ã½ tÆ°á»Ÿng â†’ táº¡o Brainstorm_[TenDuAn].md
2. Planning chi tiáº¿t â†’ táº¡o Planning_[TenDuAn].md
3. Approval planning â†’ âœ… Planning Approval
4. Báº¯t Ä‘áº§u development

ğŸ“ Hiá»‡n táº¡i cáº§n: [BÆ°á»›c tiáº¿p theo cáº§n thá»±c hiá»‡n]
```

### Planning Not Approved
```
ğŸš« PLANNING CHÆ¯A ÄÆ¯á»¢C APPROVE

Tráº¡ng thÃ¡i:
âœ… Brainstorm completed
âœ… Planning document exists
âŒ Planning Approval not checked

ğŸ”„ Cáº§n review vÃ  approve planning document trÆ°á»›c khi development
```

### Incomplete Planning
```
ğŸš« PLANNING CHÆ¯A HOÃ€N THIá»†N

Missing sections:
âŒ Architecture Overview
âŒ Success Criteria
âœ… Development Phases

ğŸ”„ Cáº§n hoÃ n thiá»‡n planning trÆ°á»›c khi báº¯t Ä‘áº§u development
```

## Development Phase Control

### Phase 1: MVP Development
**Prerequisites:**
- Planning approved âœ…
- Development environment ready âœ…
- Phase 1 features clearly defined âœ…

**Allowed Activities:**
- Setup project structure
- Implement Must-Have features only
- Basic testing and deployment
- Create basic documentation

**Prohibited Activities:**
- Implementing Should-Have or Could-Have features
- Complex optimizations
- Advanced integrations

### Phase 2: Enhanced Features
**Prerequisites:**
- Phase 1 MVP completed and tested âœ…
- User feedback collected (if applicable) âœ…
- Phase 2 features approved âœ…

**Allowed Activities:**
- Implement Should-Have features
- Performance optimizations
- Enhanced security measures
- Improved UX/UI

### Phase 3: Advanced & Scaling
**Prerequisites:**
- Phase 2 completed âœ…
- Scalability requirements confirmed âœ…
- Advanced architecture planned âœ…

**Allowed Activities:**
- Could-Have features
- Advanced analytics
- Third-party integrations
- Comprehensive testing pipeline

## AI Development Workflow

### 1. Pre-Code Validation
```python
def validate_development_request():
    # Check required files
    if not file_exists("Brainstorm_[TenDuAn].md"):
        return error_no_brainstorm()
    
    if not file_exists("Planning_[TenDuAn].md"):
        return error_no_planning()
    
    # Validate planning completeness
    planning = read_planning_file()
    if not planning.is_complete():
        return error_incomplete_planning()
    
    if not planning.is_approved():
        return error_not_approved()
    
    return proceed_to_development()
```

### 2. Task Execution Control
```python
def execute_development_task(task, current_phase):
    # Validate task belongs to current phase
    if not task.is_valid_for_phase(current_phase):
        return error_wrong_phase(task, current_phase)
    
    # Check prerequisites
    if not check_phase_prerequisites(current_phase):
        return error_prerequisites_not_met()
    
    # Execute task
    return implement_task(task)
```

### 3. Quality Gates
Before proceeding to next task:
- [ ] Current task matches planning specification
- [ ] Code follows architectural decisions
- [ ] Tests pass (if applicable)
- [ ] Documentation updated
- [ ] Progress tracked in planning file

## Code Generation Rules

### Architecture Compliance
- All code must follow architecture defined in Planning_[TenDuAn].md
- Technology stack must match planning decisions
- Database schema must align with planning
- API design must follow planning specifications

### Feature Implementation Order
1. **Setup Phase**: Project structure, dependencies, configuration
2. **Core Phase**: Must-Have features implementation  
3. **Testing Phase**: Unit tests, integration tests
4. **Deployment Phase**: Deploy MVP
5. **Enhancement Phase**: Should-Have features (Phase 2)
6. **Advanced Phase**: Could-Have features (Phase 3)

### Quality Standards
- Code must be production-ready
- Error handling must be comprehensive
- Security best practices must be followed
- Performance benchmarks must be met
- Documentation must be maintained

## Progress Tracking

### Required Updates
AI ***Báº®T BUá»˜C*** update progress trong Planning file:
```markdown
## Development Progress

### Phase 1: MVP Development â³
- [x] Project setup - Completed 2024-01-15
- [x] Database schema - Completed 2024-01-16
- [ ] Authentication system - In Progress
- [ ] Core feature 1 - Not Started
- [ ] Core feature 2 - Not Started

### Current Status
- **Active Phase**: Phase 1 MVP
- **Current Task**: Authentication system
- **Next Task**: Core feature 1
- **Estimated Completion**: 2024-01-20
```

### Quality Metrics Tracking
```markdown
## Quality Metrics

### Code Quality
- Test Coverage: 85%
- Code Review: Passed
- Security Scan: Passed
- Performance: Meets benchmarks

### Feature Completion
- Must-Have Features: 60% complete
- Should-Have Features: 0% complete
- Could-Have Features: 0% complete
```

## Error Recovery

### When Development Fails Validation
1. Stop current development activity
2. Display appropriate error message
3. Guide user to correct action
4. Do not proceed until validation passes

### When Planning Changes During Development
1. Stop current development
2. Request planning update and re-approval
3. Assess impact on existing code
4. Update development approach accordingly

## Integration with Other Rules

### With Brainstorm Workflow
- Development can only start after brainstorm completion
- Must reference brainstorm decisions in code comments
- Feature implementation must align with brainstorm priorities

### With Planning Workflow  
- All development must follow planning specifications
- Changes to planning require approval before continuing
- Progress must be tracked against planning milestones

### With Quality Rules
- Code must pass all quality gates defined in planning
- Testing standards must meet planning requirements
- Documentation must be maintained according to planning
